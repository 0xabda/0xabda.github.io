<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <meta name="author" content="Naim A.">
    <meta name="description" content="Security Research, Software and Reverse Engineering">
    <meta name="keywords" content="Naim A., Portfolio, Blog, Security, Software, Networking, Reverse Engineering">

    <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Secure Contact Form"/>
<meta name="twitter:description" content="Sending data using only HTML through a 3rd party in a secure manner."/>
<meta name="twitter:site" content="@naim94a"/>

    <meta property="og:title" content="Secure Contact Form" />
<meta property="og:description" content="Sending data using only HTML through a 3rd party in a secure manner." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://abda.nl/posts/2017/11/secure-contact-form/" />
<meta property="article:published_time" content="2017-11-26T21:45:00+02:00" />
<meta property="article:modified_time" content="2017-11-26T21:45:00+02:00" />


    
      <base href="https://abda.nl/posts/2017/11/secure-contact-form/">
    
    <title>
  Secure Contact Form · Naim A.
</title>

    
      <link rel="canonical" href="https://abda.nl/posts/2017/11/secure-contact-form/">
    

    <link href="https://fonts.googleapis.com/css?family=Lato:400,700%7CMerriweather:300,700%7CSource+Code+Pro:400,700" rel="stylesheet">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.11.2/css/all.css" integrity="sha384-KA6wR/X5RY4zFAHpv/CnoG2UW1uogYfdnP67Uv7eULvTveboZJg0qUpmJZb5VqzN" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css" integrity="sha256-l85OmPOjvil/SOvVt3HnSSjzF1TUMyT9eV0c2BzEGzU=" crossorigin="anonymous" />

    
      
      
      <link rel="stylesheet" href="/css/coder.min.28d751104f30c16da1aa1bb04015cbe662cacfe0d1b01af4f2240ad58580069c.css" integrity="sha256-KNdREE8wwW2hqhuwQBXL5mLKz&#43;DRsBr08iQK1YWABpw=" crossorigin="anonymous" media="screen" />
    

    

    

    

    
    
    <link rel="icon" type="image/png" href="https://abda.nl/images/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="https://abda.nl/images/favicon-16x16.png" sizes="16x16">

    <meta name="generator" content="Hugo 0.61.0" />
  </head>

  
  
  <body class="colorscheme-light">
    <main class="wrapper">
      <nav class="navigation">
  <section class="container">
    <a class="navigation-title" href="/">
      Naim A.
    </a>
    <input type="checkbox" id="menu-toggle" />
    <label class="menu-button float-right" for="menu-toggle"><i class="fas fa-bars"></i></label>
    <ul class="navigation-list">
      
        
          <li class="navigation-item">
            <a class="navigation-link" href="https://abda.nl/posts/">Blog</a>
          </li>
        
          <li class="navigation-item">
            <a class="navigation-link" href="https://abda.nl/projects/">Projects</a>
          </li>
        
          <li class="navigation-item">
            <a class="navigation-link" href="https://abda.nl/contact/">Contact</a>
          </li>
        
      
      
    </ul>
  </section>
</nav>


      <div class="content">
        
  <section class="container post">
    <article>
      <header>
        <div class="post-title">
          <h1 class="title">Secure Contact Form</h1>
        </div>
        <div class="post-meta">
          <div class="date">
            <span class="posted-on">
              <i class="fas fa-calendar"></i>
              <time datetime='2017-11-26T21:45:00&#43;02:00'>
                November 26, 2017
              </time>
            </span>
            <span class="reading-time">
              <i class="fas fa-clock"></i>
              2 minutes read
            </span>
          </div>
          
          <div class="tags">
  <i class="fas fa-tag"></i>
    <a href="/tags/blogging/">Blogging</a>
      <span class="separator">•</span>
    <a href="/tags/pgp/">PGP</a>
      <span class="separator">•</span>
    <a href="/tags/web-development/">Web Development</a></div>

        </div>
      </header>

      <div>
        <h1 id="choosing-a-cms">Choosing a CMS</h1>
<p>In a <a href="/posts/2017/11/new-blog/">previous post</a> I mentioned why this blog was created.
This post will present how it's contact form works.</p>
<p>At first, I quickly searched for blogging software that would suite my needs and found Hugo.
I like the idea of a static website because:</p>
<ul>
<li>Generated files are static - They will faster when compared to loading from a database. There is no database that can fail on you (except the hard-drive of the server).</li>
<li>Static sites don't really require maintenance - In a dynamic site you would have to maintain an up-to-date server unless you want to get hacked by some old vulnerability.</li>
<li>Static sites are cheap! - If you would have to host a website with a server side logic, VPS or shared hosting would be required. The free ones usually have their catches (like forced ads). On the other hand, Static site hosting can be found for free, just like this blog - It's hosted on GitHub Pages.</li>
</ul>
<p>After deciding to go with Hugo, I looked at code samples and existing themes/templates.
I found that some of them offer a Contact sheet with a form (wait? what? but it's static!!)</p>
<h1 id="adding-a-contact-form">Adding a Contact Form</h1>
<p>Apparently there is a service called <a href="https://formspree.io">formspree.io</a>. They allow you to send forms to their server - And they send it to your e-mail. Yay! my contact form works!!!</p>
<p>They avoid spamming by sending you a confirmation e-mail the first time.</p>
<p>There's just one problem: I'm a paranoid person. I don't like my data handled by third parties.</p>
<h1 id="protecting-a-contact-form">Protecting a Contact Form</h1>
<p>I don't know who's behind formspree.io (no offense, just heard of it recently), and don't want people sending them data while thinking that I'm the only recipient.</p>
<p>My approach to protect information was to add javascript to encrypt messages.
Messages would be submitted by the user, encrypted and then sent to formspree.io.</p>
<h2 id="how-its-done">How It's done</h2>
<ol>
<li>Get your PGP public key <code>gpg --export --armor KEYID &gt; my_public_key.asc</code></li>
<li>Prepare the outputted public key to be loaded into a javascript string. Replace new lines with &lsquo;\n's.</li>
<li>Write code that parses your public when the page loads.</li>
<li>When form is submitted, get the data and submit with ajax.</li>
</ol>
<p>The downside of this approach is if javascript isn't enabled, in such a case formspree.io would receive unencrypted data.</p>
<h3 id="example">Example</h3>
<script type="application/javascript" src="https://gist.github.com/naim94a/652cde49326181fc83778e4e8870ba3f.js?file=cryptcontact.js"></script>

<p>Please comment, I would like your input!</p>

      </div>

      <footer>
        


        <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "abda-nl" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
        
        
      </footer>
    </article>

    
  </section>

      </div>

      <footer class="footer">
  <section class="container">
    
    
    
    
  </section>
</footer>

    </main>

    
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-11289087-22', 'auto');
	
	ga('send', 'pageview');
}
</script>


  </body>

</html>
